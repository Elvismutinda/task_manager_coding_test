import{d as N,x as j,k as A,c as i,o,a as t,u as e,g as F,w as a,b as _,e as r,S as y,j as D,f as u,t as m,F as $,r as I,i as L}from"./app-qysNLaHR.js";import{_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-YWASh3YS.js";import{_ as P,a as M,b as q,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-CNvfXbRq.js";import{_ as k,a as x}from"./Label.vue_vue_type_script_setup_true_lang-Bsj6UBpe.js";import{_ as V,a as b,b as g,c as S,d as T,e as U,f as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-CIUT5m-V.js";import{_ as G,t as w}from"./AppLayout.vue_vue_type_script_setup_true_lang-jLO8NGge.js";import{A as H}from"./arrow-left-8Yk_6XgS.js";import"./useForwardExpose-BwDXz4vM.js";import"./RovingFocusGroup-BgfLY-QZ.js";import"./check-_nyrhCny.js";const J={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto"},K={class:"flex justify-between items-center"},O={key:0,class:"space-y-2"},Q={key:0,class:"text-sm text-red-500"},R={key:1,class:"space-y-2"},W={key:0,class:"text-sm text-red-500"},X={class:"space-y-2"},Y={key:0,class:"text-sm text-red-500"},Z={key:2,class:"space-y-2"},h={key:0,class:"text-sm text-red-500"},ee={key:3},se={class:"flex justify-between items-center"},me=N({__name:"Edit",props:{task:{},users:{},role:{}},setup(E){const d=E,l=j({task_name:d.task.task_name,user_id:d.task.user_id.toString(),name:d.task.name,email:d.task.email,status:d.task.status||"pending",deadline:d.task.deadline??""}),f=A(()=>{var p;return((p=d.users)==null?void 0:p.find(s=>s.id===parseInt(l.user_id)))||null}),B=()=>{d.role==="admin"&&f.value&&(l.name=f.value.name,l.email=f.value.email),l.put(`/tasks/${d.task.id}`,{onSuccess:()=>{w("Task updated successfully!")},onError:p=>{w("Failed to update task."),console.error(p)}})},C=[{title:"Tasks",href:"/tasks"},{title:"Edit Task",href:`/tasks/${d.task.id}/edit`}];return(p,s)=>(o(),i($,null,[t(e(F),{title:"Edit Task"}),t(G,{breadcrumbs:C},{default:a(()=>[_("div",J,[t(e(P),null,{default:a(()=>[t(e(M),null,{default:a(()=>[_("div",K,[t(e(q),null,{default:a(()=>s[4]||(s[4]=[r("Edit Task")])),_:1,__:[4]}),t(e(y),{href:"/tasks"},{default:a(()=>[t(e(v),{variant:"outline"},{default:a(()=>[t(e(H),{class:"h-4 w-4"}),s[5]||(s[5]=r(" Back "))]),_:1,__:[5]})]),_:1})])]),_:1}),t(e(z),null,{default:a(()=>[_("form",{onSubmit:D(B,["prevent"]),class:"space-y-4"},[d.role==="admin"?(o(),i("div",O,[t(e(k),{for:"task_name"},{default:a(()=>s[6]||(s[6]=[r("Task Name "),_("span",{class:"text-red-500"},"*",-1)])),_:1,__:[6]}),t(e(x),{id:"task_name",modelValue:e(l).task_name,"onUpdate:modelValue":s[0]||(s[0]=n=>e(l).task_name=n),type:"text",placeholder:"Enter task name"},null,8,["modelValue"]),e(l).errors.task_name?(o(),i("p",Q,m(e(l).errors.task_name),1)):u("",!0)])):u("",!0),d.role==="admin"?(o(),i("div",R,[t(e(k),{for:"name"},{default:a(()=>s[7]||(s[7]=[r("User"),_("span",{class:"text-red-500"},"*",-1)])),_:1,__:[7]}),t(e(V),{modelValue:e(l).user_id,"onUpdate:modelValue":s[1]||(s[1]=n=>e(l).user_id=n)},{default:a(()=>[t(e(b),null,{default:a(()=>[t(e(g),{placeholder:"Select a user"})]),_:1}),t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[t(e(U),null,{default:a(()=>s[8]||(s[8]=[r("Available Users")])),_:1,__:[8]}),(o(!0),i($,null,I(d.users,n=>(o(),L(e(c),{key:n.id,value:n.id.toString()},{default:a(()=>[r(m(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(l).errors.user_id?(o(),i("p",W,m(e(l).errors.user_id),1)):u("",!0)])):u("",!0),_("div",X,[t(e(k),{for:"status"},{default:a(()=>s[9]||(s[9]=[r("Status")])),_:1,__:[9]}),t(e(V),{modelValue:e(l).status,"onUpdate:modelValue":s[2]||(s[2]=n=>e(l).status=n)},{default:a(()=>[t(e(b),null,{default:a(()=>[t(e(g),{placeholder:"Select status"})]),_:1}),t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[t(e(U),null,{default:a(()=>s[10]||(s[10]=[r("Task Status")])),_:1,__:[10]}),t(e(c),{value:"pending"},{default:a(()=>s[11]||(s[11]=[r("Pending")])),_:1,__:[11]}),t(e(c),{value:"in_progress"},{default:a(()=>s[12]||(s[12]=[r("In Progress")])),_:1,__:[12]}),t(e(c),{value:"completed"},{default:a(()=>s[13]||(s[13]=[r("Completed")])),_:1,__:[13]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(l).errors.status?(o(),i("p",Y,m(e(l).errors.status),1)):u("",!0)]),d.role==="admin"?(o(),i("div",Z,[t(e(k),{for:"deadline"},{default:a(()=>s[14]||(s[14]=[r("Deadline")])),_:1,__:[14]}),t(e(x),{id:"deadline",modelValue:e(l).deadline,"onUpdate:modelValue":s[3]||(s[3]=n=>e(l).deadline=n),type:"date"},null,8,["modelValue"]),e(l).errors.deadline?(o(),i("p",h,m(e(l).errors.deadline),1)):u("",!0)])):u("",!0),f.value?(o(),i("div",ee,[t(e(x),{type:"hidden",value:f.value.email,disabled:""},null,8,["value"])])):u("",!0),_("div",se,[t(e(y),{href:"/tasks"},{default:a(()=>[t(e(v),{variant:"outline"},{default:a(()=>s[15]||(s[15]=[r(" Cancel ")])),_:1,__:[15]})]),_:1}),t(e(v),{type:"submit",disabled:e(l).processing},{default:a(()=>[r(m(e(l).processing?"Updating...":"Update Task"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{me as default};
